/*
	Videobox v1 - jQuery lightbox clone for displaying iframe videos
	Based on Slimbox 2.04
		(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
		MIT-style license.
*/
(function vb(x){var D=x(window),u,h,f=-1,o,F,e,v,z,J,p,n=!window.XMLHttpRequest,r=[],l=document.documentElement,k={},s=new Image(),H=new Image(),G,c,i,E,d,B,I;x(function A(){x("body").append(x([G=x('<div id="vbOverlay" />')[0],c=x('<div id="vbCenter" />')[0],E=x('<div id="vbBottomContainer" />')[0]]).css("display","none"));i=x('<iframe id="vbVideo" frameborder="0" allowfullscreen="" />').appendTo(c)[0];d=x('<div id="vbBottom" />').appendTo(E).append([x('<a id="vbCloseLink" href="#" />').add(G).click(y)[0],B=x('<div id="vbCaption" />')[0],I=x('<div id="vbNumber" />')[0],x('<div style="clear: both;" />')[0]])[0]});x.videobox=function(M,L,K){u=x.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,videoWidth:640,videoHeight:363,videoFadeDuration:400,captionAnimationDuration:400,counterText:"Video {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},K);if(typeof M=="string"){M=[[M,L]];L=0}z=D.scrollTop()+(D.height()/2);J=u.initialWidth;p=u.initialHeight;x(c).css({top:Math.max(0,z-(p/2)),width:J,height:p,marginLeft:-J/2}).show();v=n||(G.currentStyle&&(G.currentStyle.position!="fixed"));if(v){G.style.position="absolute"}x(G).css("opacity",u.overlayOpacity).fadeIn(u.overlayFadeDuration);a();g(1);h=M;u.loop=u.loop&&(h.length>1);return C(L)};x.fn.videobox=function(L,P,N){P=P||function K(Q){return[Q.href,Q.title]};N=N||function O(){return true};var M=this;return M.unbind("click").click(function O(){var S=this,U=0,T,Q=0,R;T=x.grep(M,function(W,V){return N.call(S,W,V)});for(R=T.length;Q<R;++Q){if(T[Q]==S){U=Q}T[Q]=P(T[Q],Q)}return x.videobox(T,U,L)})};function a(){var L=D.scrollLeft(),K=D.width();x([c,E]).css("left",L+(K/2));if(v){x(G).css({left:L,top:D.scrollTop(),width:K,height:D.height()})}}function g(K){if(K){x("object").add(n?"select":"embed").each(function(M,N){r[M]=[N,N.style.visibility];N.style.visibility="hidden"})}else{x.each(r,function(M,N){N[0].style.visibility=N[1]});r=[]}var L=K?"bind":"unbind";D[L]("scroll resize",a);x(document)[L]("keydown",m)}function m(M){var L=M.keyCode,K=x.inArray;return(K(L,u.closeKeys)>=0)?y():(K(L,u.nextKeys)>=0)?j():(K(L,u.previousKeys)>=0)?b():false}function b(){return C(F)}function j(){return C(e)}function C(K){if(K>=0){f=K;o=h[f][0];F=(f||(u.loop?h.length:0))-1;e=((f+1)%h.length)||(u.loop?0:-1);q();c.className="vbLoading";k=new Image();w();k.src=o;w}return false}function w(){c.className="";x(i).css({visibility:"hidden",display:""});i.src=o;var L=h[f][2]||u.videoWidth;var K=h[f][3]||u.videoHeight;if(L>(D.width()-20)){L=D.width()-20}K=(K*L)/(h[f][2]||u.videoWidth);x(i).width(L);x(i).height(K);x(B).html(h[f][1]||"");x(I).html((((h.length>1)&&u.counterText)||"").replace(/{x}/,f+1).replace(/{y}/,h.length));if(F>=0){s.src=h[F][0]}if(e>=0){H.src=h[e][0]}J=i.offsetWidth;p=i.offsetHeight;var M=Math.max(0,z-(p/2));if(c.offsetHeight!=p){x(c).animate({height:p,top:M},u.resizeDuration,u.resizeEasing)}if(c.offsetWidth!=J){x(c).animate({width:J,marginLeft:-J/2},u.resizeDuration,u.resizeEasing)}x(c).queue(function N(){x(E).css({width:J,top:M+p,marginLeft:-J/2,visibility:"hidden",display:""});x(i).css({display:"none",visibility:"",opacity:""}).fadeIn(u.videoFadeDuration,t)})}function t(){x(d).css("marginTop",-d.offsetHeight).animate({marginTop:0},u.captionAnimationDuration);E.style.visibility=""}function q(){k.onload=null;k.src=s.src=H.src=o;x([c,i,d]).stop(true);x([i,E]).hide();i.src="";i.title=""}function y(){if(f>=0){q();f=F=e=-1;x(c).hide();x(G).stop().fadeOut(u.overlayFadeDuration,g)}return false}})(jQuery);

// AUTOLOAD CODE BLOCK (MAY BE CHANGED OR REMOVED)
	jQuery(function vb($) {
	$("a[rel^='videobox']").videobox({ /* Put custom options here */ }, function vbl(el) {
			return [el.href, el.getAttribute("title"), el.getAttribute("videowidth"), el.getAttribute("videoheight")];
	}, function vbl(el) {
	  return (this == el) || ((this.rel.length > 8) && (this.rel == el.rel));
	 });
	});