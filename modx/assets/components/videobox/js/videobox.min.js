/**	
 *	@author		HitkoDev http://hitko.eu/videobox
 *	@copyright	Copyright (C) 2015 HitkoDev All Rights Reserved.
 *	@license	http://www.gnu.org/licenses/gpl-3.0.html GNU/GPL
 *
 *	This program is free software: you can redistribute it and/or modify
 *	it under the terms of the GNU General Public License as published by
 *	the Free Software Foundation, either version 3 of the License, or
 *	any later version.
 *
 *	This program is distributed in the hope that it will be useful,
 *	but WITHOUT ANY WARRANTY; without even the implied warranty of
 *	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 *	GNU General Public License for more details.
 *
 *	You should have received a copy of the GNU General Public License
 *	along with this program. If not, see <http://www.gnu.org/licenses/>
 */

!function(i){function e(){i(x).html(T.closeText),i(v).css("padding",T.padding)}function t(e,t){if(e>=0&&e<d.length){a(),l=e,s=d[e][0],i(u).html(d[l][1]||""),n(),C=!0,i([r,overlay]).toggleClass("visible",!0),i(r).toggleClass("animating",!0);var c={top:(t?-(i(r).innerHeight()/2-t.y):0)+"px",left:(t?-(i(r).innerWidth()/2-t.x):0)+"px","max-width":t?t.w+2*T.padding+"px":"15%"},p={top:"0px",left:"0px","max-width":parseInt(d[l][2]||T.videoWidth)+2*T.padding+"px"};i(v).css(c);var f=v.animate([c,p],T.animation);f.addEventListener("finish",function(){i(v).css(p);var e=g.animate([{"max-height":"0px"},{"max-height":"200px"}],T.animation);e.addEventListener("finish",function(){i(g).toggleClass("visible",!0),o()}),w.push(e)}),w.push(f)}return!1}function n(){var e=parseInt(d[l][2]||T.videoWidth),t=parseInt(d[l][3]||T.videoHeight);i(r).css({top:m.scrollTop(),left:m.scrollLeft()}),e+2*T.padding>i(r).innerWidth()&&(e=i(r).innerWidth()-2*T.padding),t=t*e/(d[l][2]||T.videoWidth),t+2*T.padding>i(r).innerHeight()&&(t=i(r).innerHeight()-2*T.padding);var n=100*t/e;i(p).css("padding-bottom",n+"%")}function o(){C&&""==i(f).attr("src")&&(i(f).show(),f.src=s,i(r).toggleClass("animating",!1))}function a(){for(var e=0;e<w.length;e++)w[e].cancel();w=[],C=!1,f.src="",i(f).hide()}var d,s,l,r,v,c,p,f,g,h,u,b,x,m=i(window),C=!1,w=[],T=defaults={videoWidth:720,videoHeight:405,closeText:"Close",padding:30,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}};i.videobox=function(n,o,a,s){return i.extend(T,defaults,a),i.vbiClose(),i.vbClose(),e(),d=n,t(o,s),!1},i.vbClose=function(){return a(),i([r,g,overlay]).toggleClass("visible",!1),i(r).toggleClass("animating",!1),i(r).css({top:0,left:0}),l>=0&&(l=-1),!1},i.fn.videobox=function(e,t){t=t||function(i){return[i.getAttribute("href"),i.getAttribute("title"),i.getAttribute("data-videowidth"),i.getAttribute("data-videoheight")]};var n=this;return n.unbind("click").click(function(o){for(var a=this,d=0,s=n.slice(),l=i(i(this).find(i(this).attr("data-target"))[0]||this),r=0;r<s.length;r++)s[r]==a&&(d=r),s[r]=t(s[r],r);l.toggleClass("vb_line_fix",!0);var v={x:l.offset().left-m.scrollLeft()+i(l).innerWidth()/2,y:l.offset().top-m.scrollTop()+i(l).innerHeight()/2,w:l.innerWidth()};return l.toggleClass("vb_line_fix",!1),i.videobox(s,d,e,v)})},i(function(){i("body").append(i([overlay=i('<div id="vbOverlay" />').click(i.vbClose)[0],r=i('<div id="vbWrap" />')[0]])),v=i('<div id="vbCenter" />').appendTo(r)[0],c=i('<div id="vbContent" />').appendTo(v).append([p=i('<div id="vbResponsive" />')[0],g=i('<div id="vbBottomContainer" />')[0]])[0],f=i('<iframe id="vbVideo" frameborder="0" allowfullscreen="true" oallowfullscreen msallowfullscreen webkitallowfullscreen mozallowfullscreen />').css("display","none").appendTo(p)[0],h=i('<div id="vbBottom" />').appendTo(g).append([b=i('<a id="vbCloseLink" href="#" ><span id="vbCloseText">'+defaults.closeText+'</span><i class="vb-icon-close"></i></a>').click(i.vbClose)[0],u=i('<span id="vbCaption" />')[0]])[0],x=i(h).find("#vbCloseText")[0]}),m.on("resize",function(){l>=0&&n()}),i("a[rel^='videobox']").videobox({})}(jQuery);

!function(t){function i(){t(w.target).after(o),t(w.target).hide(),f=[w.target]}function e(){if(g=p=!1,r>=0&&r<u.length){i(),s=u[r][0],t(o).attr("style",u[r][4]),t(o).attr("class",u[r][5]),t(c).html(u[r][1]||""),b=!0;var e={"max-width":w.baseWidth+"px"},a={"max-width":parseInt(u[r][2]||w.videoWidth)+2*w.padding+"px"},d=o.animate([e,a],w.animation);d.addEventListener("finish",function(){t(o).css(a)}),m.push(d);var h={"padding-bottom":100*w.baseHeight/w.baseWidth+"%"},v=parseInt(u[r][2]||w.videoWidth),f=parseInt(u[r][3]||w.videoHeight),W={"padding-bottom":100*f/v+"%"},x=l.animate([h,W],w.animation);x.addEventListener("finish",function(){t(l).css(W),n()}),m.push(x)}}function n(){b&&""==t(h).attr("src")&&(t(h).show(),h.src=s)}function d(){if(!g){for(var i=0;i<m.length;i++)m[i].cancel();if(m=[],b=!1,h.src="",t(h).hide(),t(o).parent().length>0){g=!0;var n=o.animate([{"max-width":parseInt(u[r][2]||w.videoWidth)+2*w.padding+"px"},{"max-width":w.baseWidth+"px"}],w.animation);m.push(n);var d=parseInt(u[r][2]||w.videoWidth),s=parseInt(u[r][3]||w.videoHeight),c=l.animate([{"padding-bottom":100*s/d+"%"},{"padding-bottom":100*w.baseHeight/w.baseWidth+"%"}],w.animation);c.addEventListener("finish",function(){t(o).detach();for(a in f)t(f[a]).show();p&&e()}),m.push(c)}else p&&e()}}var s,r,o,l,h,c,v,u=[],b=(t(window),!1),f=[],g=!1,p=!1,m=[],w=defaults={videoWidth:720,videoHeight:405,closeText:"Close",padding:30,baseWidth:200,baseHeight:150,target:"",animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}};t.vbinline=function(i,e,n,a){return t.extend(w,defaults,n),t.vbClose(),u=i,r=e,p=!0,d(),!1},t.vbiClose=function(){return d(),r>=0&&(r=-1),!1},t.fn.vbinline=function(i,e){e=e||function(t){return[t.getAttribute("href"),t.getAttribute("title"),t.getAttribute("data-videowidth"),t.getAttribute("data-videoheight"),t.getAttribute("data-style"),t.getAttribute("data-class")]};var n=this;return n.unbind("click").click(function(a){for(var d=this,s=0,r=n.slice(),o=t(t(d).find(t(d).attr("data-target"))[0]||d),l=0;l<r.length;l++)r[l]==d&&(s=l),r[l]=e(r[l],l);return t.extend(i,{target:d,baseWidth:o.width(),baseHeight:o.height()}),t.vbinline(r,s,i)})},t(function(){o=t('<div id="vbiWrap" />').append([l=t('<div id="vbiResponsive" />')[0],c=t('<span class="vb_video_title"></span>')[0],v=t('<div id="vbiClose"><i class="vb-icon-circle-close-invert"></i></div>').click(t.vbiClose)[0]])[0],h=t('<iframe id="vbiVideo" frameborder="0" allowfullscreen="true" oallowfullscreen msallowfullscreen webkitallowfullscreen mozallowfullscreen />').css("display","none").appendTo(l)[0]}),t("a[rel^='vbinline']").vbinline({})}(jQuery);

!function(t){function e(t,e){t.queue.length>0&&t.queue[t.queue.length-1]!=e?t.queue.pop():t.queue.push(e),t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(function(){t.timeout=!1,!t.rm&&t.queue.length>0&&n(t,t.queue.pop())},t.options.doubleClickTimeout)}function n(e,n){e.rm=!0;for(var o=1;e.queue.length>0;)o+=e.queue.pop()==n?1:-1;if(0!=o){0>o&&(o=0-o,n="l"==n?"r":"l");var a=("single"==e.options.move?1:e.count)*o;for(a%=e.count+e.el.length,i=0;i<a&&e.el;i++){var s="l"==n?e.el.shift():e.el.pop();"l"==n?e.target.append(s):e.target.prepend(s)}var l=e.target.children(),u="l"==n?l.slice(0,l.length-e.count):l.slice(e.count);r(u);var g=e.target.innerHeight(),c=100*a/e.count;"l"==n?e.target.prepend(u):e.target.append(u);var d={"margin-left":("l"==n?0:-c)+"%","margin-right":("l"==n?-c:0)+"%"},h={"margin-left":("l"==n?-c:0)+"%","margin-right":("l"==n?0:-c)+"%"},p=e.options.singleDuration?t.extend({},e.options.animation,{duration:e.options.singleDuration*a}):e.options.animation,v=e.target[0].animate([d,h],p);v.addEventListener("finish",function(){e.skip(n)});var f=e.cont[0].animate([{height:e.cont.css("height")},{height:g+"px"}],p);f.addEventListener("finish",function(){e.cont.css("height",g)}),e.i.css("top",e.options.target?e.target.find(e.options.target).outerHeight(!0)/2:"")}}function r(e){t(e).find("#vbiWrap").length>0&&t.vbiClose(),t(e).detach()}function o(t){var e=t.count,i=t.target.innerWidth(),n=t.basis+t.target.children().outerWidth(!0)-t.target.children().innerWidth(),r=Math.floor(i/t.basis);if(1>r)r=1;else{var o=2-n/(i/r),s=n/(i/(r+1));o>s&&r++}r!=e&&(t.count=r,a(t)),t.cont.css("height",t.target.innerHeight()),t.i.css("top",t.options.target?t.target.find(t.options.target).outerHeight(!0)/2:"")}function a(t){var e=t.target.children();if(e.length<t.count)for(var i=e.length;i<t.count&&t.el.length>0;i++){var n=t.el.shift();t.target.append(n)}else if(e.length>t.count)for(var i=e.length-1;i>=t.count;i--)t.el.unshift(e[i]),r(e[i])}var s=[],l={move:"single",target:"",singleDuration:500,doubleClickTimeout:200,animation:{duration:500,iterations:1,delay:0,easing:"ease-in-out"}};t.vbSlider=function(i,a){for(var u=0;u<s.length;u++)if(s[u].target==i)return s[u].options=t.extend({},l,a),s[u];var g=t(i).children(),c=t('<div class="vb_slider_outer"></div>').insertAfter(i),d=t('<div class="vb_slider_wrap"></div>').appendTo(c),h={wrap:d,slider:c,prev:t('<div class="vb_slider_prev"><i class="vb-icon-prev"></i></div>').prependTo(c),cont:t('<div class="vb_slider_cont"></div>').append(i).appendTo(d),next:t('<div class="vb_slider_next"><i class="vb-icon-next"></i></div>').appendTo(c),el:[],target:t(i),showPrev:function(){e(h,"r")},showNext:function(){e(h,"l")},basis:t(i).attr("data-width")||g.innerWidth(),skip:function(t){var e,i=h.target.children();if("l"==t){var e=i.slice(0,i.length-h.count);for(r(e),u=0;u<e.length;u++)h.el.push(e[u])}else if("r"==t){var e=i.slice(h.count);for(r(e),u=e.length-1;u>=0;u--)h.el.unshift(e[u])}h.target.css({"margin-left":0,"margin-right":0}),h.queue.length>0&&!h.timeout?n(h,h.queue.pop()):h.rm=!1},rm:!1,queue:[],options:t.extend({},l,a),timeout:!1};return h.i=h.slider.find("i"),h.cont.toggleClass(h.options.move,!0),o(h),h.prev.click(function(){h.showPrev()}),h.next.click(function(){h.showNext()}),s.push(h),h},t.fn.vbSlider=function(e){for(var i=[],n=0;n<this.length;n++){var r=this[n],o={},a=t(r).attr("data-target"),s=t(r).attr("data-move");a&&(o.target=a),s&&s.trim()&&(o.move=s.trim()),i.push(t.vbSlider(r,t.extend({},e,o)))}return i},t(window).on("resize",function(){for(var t=0;t<s.length;t++)o(s[t])}),t(".vb_slider").vbSlider({})}(jQuery);